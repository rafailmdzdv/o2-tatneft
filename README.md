## O2 Tatneft Project
#### Requirements
- [Python 3.11](https://www.python.org/downloads/release/python-3111/)
- [poetry](https://python-poetry.org/)
- [Javascript]()
- [Solid JS](https://www.solidjs.com/)

### **Установка**
##### **Окружение должно быть 3.11 версии. Установочный скрипт по-умолчанию устанавливает всё в окружение python 3.11, поэтому, если у вас python >3.11, пропишите в директории проекта:**
	poetry env use python3.11
------------------------------
##### **Далее необходимо указать секретные ключи от джанго и некоторые данные в файле [.env.example](https://github.com/rafailka-m/o2-tatneft/blob/main/src/.env.example):**
```
SECOND_SECRET_TOKEN=''
THIRD_SECRET_TOKEN=''
LK_TATNEFT_LOGIN=''
LK_TATNEFT_PASSWORD=''
EMAIL_HOST_USER='' -- использовать только Gmail
EMAIL_HOST_PASSWORD='' -- ниже объяснение
```
##### [EMAIL_HOST_PASSWORD](https://github.com/rafailka-m/o2-tatneft/blob/main/src/.env.example#LL6C1-L6C20) - пароль приложений в Google. Получить его можно в [**личном кабинете**](https://myaccount.google.com/apppasswords) (приложение для Windows PC, хотя я не фанат окон с выходом на печальную архитектуру :-))
---------------------
##### SECOND и THIRD секретные токены уже от Джанго приложений, можете их сгенерировать в любом источнике.
----------------------------
## **Установка**
##### В [главной директории](https://github.com/rafailka-m/o2-tatneft/tree/main) пропишите:
	./install.sh
----------------------
## **Запуск**
##### Так же, в главной директории:
	./start.sh

###### Интерфейс третьего приложения доступен по адресу http://localhost:4173/, сервер: http://localhost:8001/ (запускается через gunicorn)
###### Второе приложение работает на порту 8000
-------------------------------------------------------
---------------------------------------------------------
### **Что делает приложение?**
##### Данный проект разделён на три независимых подпроекта, каждый из которых выполняет отведённую ему задачу.

#### В кратце о них:

##### **Приложение №1**, которое я назвал [number_sender](https://github.com/rafailka-m/o2-tatneft/tree/main/src/number_sender) выполняет роль "подмастерья". Оно каждые 7 минут берёт из базы данных данные топливных карт, а именно: идентификатор и номер, и отправляет Приложению №2.

##### **Приложение №2** с данным ему именем limit_parser уже является "мастером", который принимает от своего подмастерья данные топливных карт и использует их для дальнейших действий, а именно: добавления лимита.

##### **Приложение №3** является полноценным сайтом, своего рода "прорабом", которое взаимодействует как с первым, так и вторым приложением, а, если быть точнее: собирает отчёты, которые можно выгрузить в личном кабинете. Также оно собирает данные о АЗС на территории СНГ (РФ, Украина, Беларусь, Узбекистан), которые можно просмотреть на карте или выгрузить в .xlsx формате в ЛК.
---------------------------------------
### **Какие инструменты я использовал?**
- SQLite
- Django
- DRF
- Playwright
- Schedule
- Pydantic
- Gunicorn (сервер 3-го приложения)
- Shell Script
- Flake8
- Javascript, HTML, CSS
- Solid JS
